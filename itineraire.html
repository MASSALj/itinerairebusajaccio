<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
<head>
    <title>Itinéraire Bus</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <!-- Elément Google Maps indiquant que la carte doit être affiché en plein écran et
    qu'elle ne peut pas être redimensionnée par l'utilisateur -->
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <!-- Inclusion de l'API Google MAPS -->
    <!-- Le paramètre "sensor" indique si cette application utilise détecteur pour déterminer la position de l'utilisateur -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyCDIsOi_yjA_mo6kpMkDMYwOolP3s5Thtk&sensor=false"></script>
    <script type="text/javascript">
        function initialiser(x, y) {

            if (x == undefined){
                x = 41.9231855;
            }

            if (y == undefined) {
                y = 8.7407447;
            }

            var latlng = new google.maps.LatLng(x, y);

            var options = {
                center: latlng,
                zoom: 19,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var carte = new google.maps.Map(document.getElementById("carte"), options);

            /****************Nouveau code****************/

                //redéfinition du centre de la carte
            carte.setCenter(new google.maps.LatLng(x, y));
            //redéfinition du zoom
            carte.setZoom(15);

            //chemin du tracé
            var parcoursBus = [
                new google.maps.LatLng(41.919969, 8.737142),
                new google.maps.LatLng(41.923968, 8.739073),
                new google.maps.LatLng(41.926027, 8.738685),
                new google.maps.LatLng(41.929380, 8.740230)
            ];

            var traceParcoursBus = new google.maps.Polyline({
                path: parcoursBus,//chemin du tracé
                strokeColor: "#FF0000",//couleur du tracé
                strokeOpacity: 1.0,//opacité du tracé
                strokeWeight: 2//grosseur du tracé
            });

            //lier le tracé à la carte
            //ceci permet au tracé d'être affiché sur la carte
            traceParcoursBus.setMap(carte);

            var myLatLng = {lat: 41.926027, lng: 8.738685};

            var marker = new google.maps.Marker({
                position: myLatLng,
                map: carte,
                title: 'Hello World!'
            });



            /********************************************/
        }
    </script>
</head>

<body onload="initialiser(undefined, undefined)">
<div>
    <input type="text" id="long">
    <input type="text" id="lat">
    <input type="button" value="envoyer" onclick="initialiser(document.getElementById('long').value, document.getElementById('lat').value)">

</div>
<div id="carte" style="width:100%; height:100%"></div>

</body>
</html>